# دليل الوصول من الأجهزة الأخرى على الشبكة المحلية

## المشكلة الأصلية
- التطبيق يعمل فقط على `localhost:3000`
- لا يمكن الوصول من الموبايل أو أجهزة أخرى على نفس الشبكة
- خطأ WebSocket: `ws://192.168.0.161:3000/_next/webpack-hmr failed`

## الحل

### 1. تحديث package.json
تم تغيير أمر التشغيل من:
```json
"dev": "next dev --webpack"
```

إلى:
```json
"dev": "next dev --webpack -H 0.0.0.0"
```

**الشرح:**
- `-H 0.0.0.0` → يجعل Next.js يستمع على جميع network interfaces
- بدون هذا، يستمع فقط على `127.0.0.1` (localhost فقط)

### 2. إعادة تشغيل السيرفر

**مهم جداً:** يجب إيقاف السيرفر وتشغيله من جديد:

```powershell
# 1. إيقاف السيرفر الحالي (Ctrl+C)

# 2. تشغيل من جديد
cd apps\web
npm run dev
```

### 3. معرفة IP الخاص بك

```powershell
# في Windows PowerShell
ipconfig

# ابحث عن "IPv4 Address" تحت "Wireless LAN adapter Wi-Fi"
# مثلاً: 192.168.0.161
```

### 4. الوصول من الأجهزة الأخرى

افتح المتصفح في الموبايل أو أي جهاز آخر:
```
http://192.168.0.161:3000
```

**ملاحظة:** استبدل `192.168.0.161` بالـ IP الفعلي لجهازك

## التحقق من عمل الحل

بعد إعادة التشغيل، يجب أن ترى في terminal:

```
- Local:        http://localhost:3000
- Network:      http://192.168.0.161:3000
```

إذا ظهر `Network` → الحل نجح! ✅

## استكشاف الأخطاء

### المشكلة: لا يزال لا يعمل

**الحلول:**
1. تأكد من إيقاف السيرفر القديم تماماً
2. تأكد من أن الجهازين على نفس الشبكة (WiFi)
3. تحقق من Firewall:

```powershell
# السماح لـ Node.js في Windows Firewall
# عند أول تشغيل، قد يطلب منك Windows إذن
# اضغط "Allow access"
```

### المشكلة: API لا يعمل من الجهاز الآخر

إذا كان الـ API أيضاً يحتاج للوصول:

```powershell
# في apps/api
# تحديث package.json
"start:dev": "nest start --watch --host 0.0.0.0"
```

ثم حدّث `.env.local` في apps/web:
```bash
NEXT_PUBLIC_API_URL=http://192.168.0.161:3001/api/v1
```

### المشكلة: WebSocket HMR لا يعمل

هذا طبيعي أحياناً في بيئة التطوير عبر الشبكة. الحلول:
1. أعد تحميل الصفحة يدوياً بعد التغييرات
2. أو استخدم localhost على نفس الجهاز للتطوير

## ملاحظات أمنية

⚠️ **تحذيرات:**
1. هذا فقط لبيئة التطوير (Development)
2. لا تستخدم `0.0.0.0` في الإنتاج بدون firewall
3. تأكد أن شبكتك المحلية آمنة

## الاستخدام العملي

### للتطوير على نفس الجهاز:
```
http://localhost:3000
```

### للاختبار من الموبايل:
```
http://192.168.0.161:3000
```

### للنشر (Production):
```
# استخدم domain حقيقي مع SSL
https://rukny.io
```

---

## ملخص الأوامر

```powershell
# 1. معرفة IP الخاص بك
ipconfig

# 2. تشغيل Next.js للوصول من الشبكة
cd apps\web
npm run dev

# 3. الوصول من جهاز آخر
# افتح: http://YOUR_IP:3000
```

**تم! الآن يمكنك الوصول من أي جهاز على الشبكة** ✅
